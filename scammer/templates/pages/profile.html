{% extends 'parent/base.html' %}

{% block title %}پروفایل{% endblock %}

{% block content %}
<div class="container mx-auto py-6">

  <!-- بخش عنوان و Logout -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">پروفایل شما</h1>
      <form method="post" action="{% url 'scam:logout' %}">
        {% csrf_token %}
        <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded-full">خروج</button>
</form>
  </div>

  <!-- لینک Add Post -->
  <div class="mb-6">
    <a href="{% url 'scam:create_post' %}" class="bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600 transition">ایجاد پست جدید</a>
  </div>

  <!-- جدول پست‌های کاربر -->
  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-200 rounded-lg">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-6 py-3 text-left text-gray-600">عنوان پست</th>
          <th class="px-6 py-3 text-left text-gray-600">تاریخ انتشار</th>
          <th class="px-6 py-3 text-center text-gray-600">عملیات</th>
        </tr>
      </thead>
      <tbody>
        {% for post in user_posts %}
        <tr class="border-t border-gray-200">
          <td class="px-6 py-4">{{ post.name }}</td>
          <td class="px-6 py-4">{{ post.created_at|date:"Y-m-d H:i" }}</td>
          <td class="px-6 py-4 text-center">
            <a href="{% url 'scam:edit_post' pk=post.id slug=post.slug %}" class="text-blue-500 hover:underline mx-1">ویرایش</a>
            <a href="{% url 'scam:delete_post' post.id %}" class="text-red-500 hover:underline mx-1">حذف</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="px-6 py-4 text-center text-gray-500">پستی برای نمایش وجود ندارد.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}